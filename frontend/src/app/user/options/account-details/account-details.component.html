

<app-sidebar></app-sidebar>


<div id="account-details" class="content" *ngIf="showContent">
    
    <form [formGroup]="editUserForm" id="edit-user-form">
        <p class="fs-3 text-center mb-3">Account details</p>
        <div class="alert alert-danger d-flex flex-row justify-content-space-between align-items-center" *ngIf="errorMessage">
            {{errorMessage}}
            <button type="button" class="btn-close me-2 m-auto" (click)="errorMessage = ''" aria-label="Close"></button>
        </div>
        <div class="alert alert-success d-flex flex-row justify-content-space-between align-items-center" *ngIf="successMessage">
            {{successMessage}}
            <button type="button" class="btn-close me-2 m-auto" (click)="successMessage = ''" aria-label="Close"></button>
        </div>
        <mat-form-field class="full-width mb-1">
            <mat-label>Firstname</mat-label>
            <input type="text" id="firsntame" placeholder="Firstname" formControlName="firstname" matInput >
            @if(editUserForm.get('firstname')?.invalid && editUserForm.get('firstname')?.touched) {
                <mat-error>Firstname is invalid</mat-error>
            }
        </mat-form-field>

        <mat-form-field class="full-width mb-1">
            <mat-label>Middlename</mat-label>
            <input type="text" id="middlename" placeholder="Middlename" formControlName="middlename" matInput >
        </mat-form-field>

        <mat-form-field class="full-width mb-1">
            <mat-label>Lastname</mat-label>
            <input type="text" id="lastname" placeholder="Lastname" formControlName="lastname" matInput>
            @if(editUserForm.get('lastname')?.invalid && editUserForm.get('firstname')?.touched) {
                <mat-error>Lastname is invalid</mat-error>
            }
        </mat-form-field>
        
        <mat-form-field class="full-width mb-1">
            <mat-label>Email</mat-label>
            <input type="email" matInput formControlName="email" autocomplete="username"
                   placeholder="Ex. pat@example.com">
            @if(editUserForm.get('email')?.invalid && editUserForm.get('email')?.touched){
                <mat-error>Invalid email!</mat-error>
            }
        </mat-form-field>

        <mat-form-field class="full-width mb-1">
            <mat-label>Enter your password</mat-label>
            <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" autocomplete="current-password">
            <button mat-icon-button matSuffix (click)="hide = !hide" [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
              <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            @if(editUserForm.get('password')?.invalid && editUserForm.get('password')?.touched){
                <mat-error>Invalid password!</mat-error>
            }
        </mat-form-field>

        <button mat-flat-button color="primary" class="full-width w-100" (click)="saveChanges()" [disabled]="editUserForm.invalid">Update details</button>
    </form>
</div>

<div *ngIf="showSpinner">
    <app-spinner></app-spinner>
</div>
